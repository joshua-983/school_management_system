# Generated by Django 4.2.26 on 2026-01-08 20:50

import core.models.base
from decimal import Decimal
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AcademicTerm',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('period_system', models.CharField(choices=[('TERM', 'Term System (3 terms)'), ('SEMESTER', 'Semester System (2 semesters)'), ('QUARTER', 'Quarter System (4 quarters)'), ('TRIMESTER', 'Trimester System (3 trimesters)')], default='TERM', max_length=10, verbose_name='Period System')),
                ('period_number', models.PositiveSmallIntegerField(help_text='1, 2, 3 for Terms; 1, 2 for Semesters', verbose_name='Period Number')),
                ('name', models.CharField(help_text='e.g., "First Term", "Fall Semester"', max_length=100, verbose_name='Term Name')),
                ('status', models.CharField(choices=[('PLANNED', 'Planned'), ('ACTIVE', 'Active'), ('COMPLETED', 'Completed'), ('ARCHIVED', 'Archived')], default='PLANNED', max_length=10, verbose_name='Term Status')),
                ('start_date', models.DateField(verbose_name='Start Date')),
                ('end_date', models.DateField(verbose_name='End Date')),
                ('is_active', models.BooleanField(default=False, help_text='Mark as current active term', verbose_name='Active Term')),
                ('is_locked', models.BooleanField(default=False, help_text='Lock term to prevent modifications', verbose_name='Locked')),
                ('sequence_num', models.PositiveSmallIntegerField(default=1, verbose_name='Sequence Number')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
            ],
            options={
                'verbose_name': 'Academic Term',
                'verbose_name_plural': 'Academic Terms',
                'ordering': ['academic_year', 'sequence_num'],
            },
        ),
        migrations.CreateModel(
            name='AcademicYear',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='Format: YYYY/YYYY (e.g., 2024/2025)', max_length=9, unique=True, validators=[django.core.validators.RegexValidator('^\\d{4}/\\d{4}$')], verbose_name='Academic Year')),
                ('start_date', models.DateField(help_text='Academic year start date (typically September 1)', verbose_name='Start Date')),
                ('end_date', models.DateField(help_text='Academic year end date (typically August 31)', verbose_name='End Date')),
                ('is_active', models.BooleanField(default=False, help_text='Mark as the current academic year', verbose_name='Active Academic Year')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
            ],
            options={
                'verbose_name': 'Academic Year',
                'verbose_name_plural': 'Academic Years',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='AnalyticsCache',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('data', models.JSONField()),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Analytics Cache',
                'verbose_name_plural': 'Analytics Caches',
            },
        ),
        migrations.CreateModel(
            name='Announcement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('NORMAL', 'Normal'), ('HIGH', 'High'), ('URGENT', 'Urgent')], default='NORMAL', max_length=10)),
                ('target_roles', models.CharField(choices=[('ALL', 'All Users'), ('STUDENTS', 'Students'), ('TEACHERS', 'Teachers'), ('ADMINS', 'Administrators'), ('CLASS', 'Specific Classes')], default='ALL', max_length=20)),
                ('target_class_levels', models.CharField(blank=True, help_text='Comma-separated class levels (e.g., P1,P2,P3) or leave blank for all', max_length=100)),
                ('is_active', models.BooleanField(default=True)),
                ('start_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('end_date', models.DateTimeField(blank=True, null=True)),
                ('attachment', models.FileField(blank=True, null=True, upload_to='announcements/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Announcement',
                'verbose_name_plural': 'Announcements',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Assignment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('assignment_type', models.CharField(choices=[('HOMEWORK', 'Homework'), ('CLASSWORK', 'Classwork'), ('TEST', 'Test'), ('EXAM', 'Examination')], max_length=10)),
                ('due_date', models.DateTimeField()),
                ('max_score', models.PositiveSmallIntegerField(default=100)),
                ('weight', models.PositiveSmallIntegerField(help_text='Percentage weight of this assignment in the final grade', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(100)])),
                ('attachment', models.FileField(blank=True, help_text='Assignment document/attachment', null=True, upload_to='assignment_attachments/')),
                ('instructions', models.TextField(blank=True, help_text='Detailed assignment instructions')),
                ('learning_objectives', models.TextField(blank=True, help_text='What students will learn')),
                ('resources', models.TextField(blank=True, help_text='Recommended resources/links')),
                ('rubric', models.FileField(blank=True, null=True, upload_to='assignment_rubrics/')),
                ('sample_solution', models.FileField(blank=True, null=True, upload_to='sample_solutions/')),
                ('allow_late_submissions', models.BooleanField(default=False, help_text='Allow students to submit after the due date')),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Assignment',
                'verbose_name_plural': 'Assignments',
                'ordering': ['-due_date', 'subject'],
            },
        ),
        migrations.CreateModel(
            name='AssignmentAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('average_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('highest_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('lowest_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('submission_rate', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('on_time_submission_rate', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('total_students', models.PositiveIntegerField(default=0)),
                ('graded_students', models.PositiveIntegerField(default=0)),
                ('pending_students', models.PositiveIntegerField(default=0)),
                ('late_submissions', models.PositiveIntegerField(default=0)),
                ('last_calculated', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Assignment Analytics',
                'verbose_name_plural': 'Assignment Analytics',
                'ordering': ['-last_calculated'],
            },
        ),
        migrations.CreateModel(
            name='AssignmentTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('assignment_type', models.CharField(choices=[('HOMEWORK', 'Homework'), ('CLASSWORK', 'Classwork'), ('TEST', 'Test'), ('EXAM', 'Examination')], max_length=10)),
                ('max_score', models.PositiveSmallIntegerField(default=100)),
                ('weight', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(100)])),
                ('attachment', models.FileField(blank=True, null=True, upload_to='assignment_templates/')),
                ('is_public', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Assignment Template',
                'verbose_name_plural': 'Assignment Templates',
            },
        ),
        migrations.CreateModel(
            name='AttendanceAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_level', models.CharField(choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], max_length=20)),
                ('date', models.DateField()),
                ('present_count', models.IntegerField()),
                ('absent_count', models.IntegerField()),
                ('late_count', models.IntegerField()),
                ('attendance_rate', models.FloatField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Attendance Analytics',
                'verbose_name_plural': 'Attendance Analytics',
            },
        ),
        migrations.CreateModel(
            name='AttendancePeriod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period_type', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('custom', 'Custom')], max_length=10)),
                ('name', models.CharField(blank=True, help_text='Custom name for the period', max_length=100)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_locked', models.BooleanField(default=False, help_text='Lock period to prevent modifications')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Attendance Period',
                'verbose_name_plural': 'Attendance Periods',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='AttendanceSummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('days_present', models.PositiveIntegerField(default=0)),
                ('days_absent', models.PositiveIntegerField(default=0)),
                ('days_late', models.PositiveIntegerField(default=0)),
                ('days_excused', models.PositiveIntegerField(default=0)),
                ('days_sick', models.PositiveIntegerField(default=0)),
                ('days_other', models.PositiveIntegerField(default=0)),
                ('total_days', models.PositiveIntegerField(default=0)),
                ('attendance_rate', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('present_rate', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('last_updated', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Attendance Summaries',
                'ordering': ['student__last_name', 'student__first_name'],
            },
        ),
        migrations.CreateModel(
            name='AuditAlertRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('condition_type', models.CharField(choices=[('FREQUENCY', 'Frequency Threshold'), ('PATTERN', 'Pattern Detection'), ('RISK_SCORE', 'Risk Score Threshold'), ('CUSTOM', 'Custom Condition')], max_length=20)),
                ('condition_config', models.JSONField(default=dict)),
                ('severity', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], default='MEDIUM', max_length=20)),
                ('action', models.CharField(choices=[('ALERT', 'Generate Alert'), ('NOTIFY', 'Send Notification'), ('BLOCK', 'Block Action'), ('ESCALATE', 'Escalate to Admin')], default='ALERT', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('has_financial_access', models.BooleanField(default=True, verbose_name='Has Financial Access')),
            ],
            options={
                'verbose_name': 'Audit Alert Rule',
                'verbose_name_plural': 'Audit Alert Rules',
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('CREATE', 'Create'), ('UPDATE', 'Update'), ('DELETE', 'Delete'), ('LOGIN', 'Login'), ('LOGOUT', 'Logout'), ('ACCESS', 'Access'), ('BULK_MESSAGE_SENT', 'Bulk Message Sent'), ('OTHER', 'Other')], db_index=True, max_length=20)),
                ('model_name', models.CharField(db_index=True, max_length=50)),
                ('object_id', models.CharField(blank=True, db_index=True, max_length=50, null=True)),
                ('details', models.JSONField(blank=True, default=dict, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, db_index=True, null=True)),
                ('user_agent', models.TextField(blank=True, help_text='User agent string from the HTTP request', null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
            ],
            options={
                'verbose_name': 'Audit Log',
                'verbose_name_plural': 'Audit Logs',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='AuditReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('report_type', models.CharField(choices=[('DAILY', 'Daily Report'), ('WEEKLY', 'Weekly Report'), ('MONTHLY', 'Monthly Report'), ('SECURITY', 'Security Report'), ('COMPLIANCE', 'Compliance Report'), ('CUSTOM', 'Custom Report')], max_length=20)),
                ('parameters', models.JSONField(default=dict)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('file_path', models.FileField(blank=True, null=True, upload_to='audit_reports/')),
                ('is_archived', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'Audit Report',
                'verbose_name_plural': 'Audit Reports',
            },
        ),
        migrations.CreateModel(
            name='Bill',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('bill_number', models.CharField(max_length=20, unique=True)),
                ('issue_date', models.DateField(auto_now_add=True)),
                ('due_date', models.DateField()),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.PositiveSmallIntegerField(choices=[(1, 'First Term'), (2, 'Second Term'), (3, 'Third Term')])),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('issued', 'Issued'), ('partial', 'Partially Paid'), ('paid', 'Paid'), ('overdue', 'Overdue'), ('cancelled', 'Cancelled'), ('refunded', 'Refunded')], default='issued', max_length=20)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('amount_paid', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('balance', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Bill',
                'verbose_name_plural': 'Bills',
                'ordering': ['-issue_date'],
            },
        ),
        migrations.CreateModel(
            name='BillItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('description', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Bill Item',
                'verbose_name_plural': 'Bill Items',
            },
        ),
        migrations.CreateModel(
            name='BillPayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('payment_mode', models.CharField(choices=[('cash', 'Cash'), ('bank_transfer', 'Bank Transfer'), ('mobile_money', 'Mobile Money'), ('cheque', 'Cheque'), ('other', 'Other')], default='cash', max_length=20)),
                ('payment_date', models.DateField(default=django.utils.timezone.now)),
                ('reference_number', models.CharField(blank=True, max_length=50, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('is_confirmed', models.BooleanField(default=False, verbose_name='Confirmed')),
                ('confirmed_at', models.DateTimeField(blank=True, null=True, verbose_name='Confirmation Date')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Bill Payment',
                'verbose_name_plural': 'Bill Payments',
                'ordering': ['-payment_date'],
            },
        ),
        migrations.CreateModel(
            name='Budget',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(help_text='Budget category', max_length=100)),
                ('academic_year', models.CharField(max_length=9)),
                ('notes', models.TextField(blank=True, null=True)),
                ('allocated_amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('actual_spent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Budget',
                'verbose_name_plural': 'Budgets',
                'ordering': ['academic_year', 'category'],
            },
        ),
        migrations.CreateModel(
            name='ClassAssignment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_level', models.CharField(choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], max_length=20, verbose_name='Class Level')),
                ('academic_year', models.CharField(max_length=9, validators=[django.core.validators.RegexValidator('^\\d{4}/\\d{4}$')], verbose_name='Academic Year')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'Class Assignment',
                'verbose_name_plural': 'Class Assignments',
                'ordering': ['academic_year', 'class_level', 'subject'],
            },
        ),
        migrations.CreateModel(
            name='DataRetentionPolicy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('retention_type', models.CharField(choices=[('AUDIT_LOG', 'Audit Logs'), ('SECURITY_EVENT', 'Security Events'), ('USER_DATA', 'User Data'), ('BACKUP', 'Backup Files')], max_length=20)),
                ('retention_period_days', models.IntegerField(help_text='Number of days to retain data')),
                ('description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Data Retention Policy',
                'verbose_name_plural': 'Data Retention Policies',
            },
        ),
        migrations.CreateModel(
            name='Expense',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('SALARIES', 'Salaries & Wages'), ('UTILITIES', 'Utilities'), ('MAINTENANCE', 'Maintenance & Repairs'), ('SUPPLIES', 'Teaching Supplies'), ('EQUIPMENT', 'Equipment & Furniture'), ('TRANSPORT', 'Transportation'), ('PROFESSIONAL', 'Professional Development'), ('OTHER', 'Other Expenses')], max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('date', models.DateField()),
                ('description', models.TextField()),
                ('receipt_number', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Expense',
                'verbose_name_plural': 'Expenses',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='Fee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9)),
                ('term', models.PositiveSmallIntegerField(choices=[(1, 'First Term'), (2, 'Second Term'), (3, 'Third Term')])),
                ('amount_payable', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('amount_paid', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('balance', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('generation_status', models.CharField(choices=[('DRAFT', 'Draft'), ('GENERATED', 'Generated'), ('VERIFIED', 'Verified'), ('LOCKED', 'Locked'), ('CANCELLED', 'Cancelled')], default='DRAFT', help_text='Status in the fee generation workflow', max_length=20, verbose_name='Generation Status')),
                ('verified_at', models.DateTimeField(blank=True, null=True, verbose_name='Verification Date')),
                ('locked_at', models.DateTimeField(blank=True, null=True, verbose_name='Locking Date')),
                ('payment_status', models.CharField(choices=[('draft', 'Draft'), ('issued', 'Issued'), ('partial', 'Part Payment'), ('paid', 'Paid'), ('unpaid', 'Unpaid'), ('overdue', 'Overdue'), ('cancelled', 'Cancelled'), ('refunded', 'Refunded')], default='unpaid', max_length=20)),
                ('payment_mode', models.CharField(blank=True, choices=[('cash', 'Cash'), ('mobile_money', 'Mobile Money'), ('bank_transfer', 'Bank Transfer'), ('cheque', 'Cheque'), ('credit_card', 'Credit Card'), ('debit_card', 'Debit Card'), ('online', 'Online Payment'), ('other', 'Other')], max_length=20, null=True)),
                ('payment_date', models.DateField(blank=True, null=True)),
                ('due_date', models.DateField()),
                ('receipt_number', models.CharField(blank=True, max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('date_recorded', models.DateTimeField(auto_now_add=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Fee',
                'verbose_name_plural': 'Fees',
                'ordering': ['-date_recorded'],
            },
        ),
        migrations.CreateModel(
            name='FeeCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(choices=[('TUITION', 'Tuition Fees'), ('ADMISSION', 'Admission Fees'), ('TRANSPORT', 'Transport Fees'), ('TECHNOLOGY', 'Technology Fee'), ('EXAMINATION', 'Examination Fees'), ('UNIFORM', 'Uniform Fees'), ('PTA', 'PTA Fees'), ('EXTRA_CLASSES', 'Extra Classes Fees'), ('LIBRARY', 'Library Fees'), ('SPORTS', 'Sports Fees'), ('MEDICAL', 'Medical Fees'), ('DEVELOPMENT', 'Development Levy'), ('OTHER', 'Other Fees')], max_length=100)),
                ('description', models.TextField(blank=True)),
                ('default_amount', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('frequency', models.CharField(choices=[('one_time', 'One Time'), ('termly', 'Per Term'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('semester', 'Per Semester'), ('annual', 'Annual'), ('custom', 'Custom')], default='termly', max_length=20)),
                ('is_mandatory', models.BooleanField(default=True)),
                ('is_active', models.BooleanField(default=True)),
                ('applies_to_all', models.BooleanField(default=True)),
                ('class_levels', models.CharField(blank=True, help_text='Comma-separated list of class levels this applies to (leave blank for all)', max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Fee Category',
                'verbose_name_plural': 'Fee Categories',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='FeeDiscount',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('discount_type', models.CharField(choices=[('PERCENT', 'Percentage'), ('FIXED', 'Fixed Amount')], max_length=10)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=5)),
                ('reason', models.TextField()),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Fee Discount',
                'verbose_name_plural': 'Fee Discounts',
            },
        ),
        migrations.CreateModel(
            name='FeeGenerationBatch',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('batch_number', models.CharField(max_length=50, unique=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('GENERATED', 'Generated'), ('UNDER_REVIEW', 'Under Review'), ('VERIFIED', 'Verified'), ('LOCKED', 'Locked'), ('CANCELLED', 'Cancelled')], default='DRAFT', max_length=20)),
                ('total_students', models.IntegerField(default=0)),
                ('total_fees', models.IntegerField(default=0)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0.0, max_digits=12)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('locked_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Fee Generation Batch',
                'verbose_name_plural': 'Fee Generation Batches',
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='FeeInstallment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('due_date', models.DateField()),
                ('is_paid', models.BooleanField(default=False)),
                ('payment_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Fee Installment',
                'verbose_name_plural': 'Fee Installments',
                'ordering': ['due_date'],
            },
        ),
        migrations.CreateModel(
            name='FeePayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('payment_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('payment_mode', models.CharField(choices=[('cash', 'Cash'), ('check', 'Check'), ('bank_transfer', 'Bank Transfer'), ('mobile_money', 'Mobile Money'), ('other', 'Other')], max_length=15)),
                ('receipt_number', models.CharField(blank=True, max_length=20, unique=True)),
                ('notes', models.TextField(blank=True)),
                ('bank_reference', models.CharField(blank=True, max_length=50)),
                ('is_confirmed', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Fee Payment',
                'verbose_name_plural': 'Fee Payments',
                'ordering': ['-payment_date'],
            },
        ),
        migrations.CreateModel(
            name='FinancialAuditTrail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('CREATE', 'Create'), ('UPDATE', 'Update'), ('DELETE', 'Delete'), ('VIEW', 'View'), ('PAYMENT', 'Payment'), ('REFUND', 'Refund'), ('CANCEL', 'Cancel')], max_length=20)),
                ('model_name', models.CharField(max_length=100)),
                ('object_id', models.CharField(max_length=100)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('before_state', models.JSONField(blank=True, null=True)),
                ('after_state', models.JSONField(blank=True, null=True)),
                ('changes', models.JSONField(blank=True, null=True)),
                ('timestamp', models.DateTimeField(default=django.utils.timezone.now)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='Grade',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9, validators=[django.core.validators.RegexValidator('^\\d{4}/\\d{4}$', 'Academic year must be in format YYYY/YYYY')])),
                ('term', models.PositiveSmallIntegerField(choices=[(1, 'First Term'), (2, 'Second Term'), (3, 'Third Term')])),
                ('homework_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Homework percentage score (0-100%)', max_digits=5, validators=[django.core.validators.MinValueValidator(Decimal('0.00'), 'Score cannot be negative'), django.core.validators.MaxValueValidator(Decimal('100.00'), 'Score cannot exceed 100%')], verbose_name='Homework Score (%)')),
                ('classwork_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Classwork percentage score (0-100%)', max_digits=5, validators=[django.core.validators.MinValueValidator(Decimal('0.00'), 'Score cannot be negative'), django.core.validators.MaxValueValidator(Decimal('100.00'), 'Score cannot exceed 100%')], verbose_name='Classwork Score (%)')),
                ('test_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Test percentage score (0-100%)', max_digits=5, validators=[django.core.validators.MinValueValidator(Decimal('0.00'), 'Score cannot be negative'), django.core.validators.MaxValueValidator(Decimal('100.00'), 'Score cannot exceed 100%')], verbose_name='Test Score (%)')),
                ('exam_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Exam percentage score (0-100%)', max_digits=5, validators=[django.core.validators.MinValueValidator(Decimal('0.00'), 'Score cannot be negative'), django.core.validators.MaxValueValidator(Decimal('100.00'), 'Score cannot exceed 100%')], verbose_name='Exam Score (%)')),
                ('total_score', models.DecimalField(blank=True, decimal_places=2, editable=False, help_text='Automatically calculated weighted total score', max_digits=5, null=True, verbose_name='Total Score (%)')),
                ('ges_grade', models.CharField(choices=[('1', '1 (90-100%) - Outstanding'), ('2', '2 (80-89%) - Excellent'), ('3', '3 (70-79%) - Very Good'), ('4', '4 (60-69%) - Good'), ('5', '5 (50-59%) - Satisfactory'), ('6', '6 (40-49%) - Fair'), ('7', '7 (30-39%) - Weak'), ('8', '8 (20-29%) - Very Weak'), ('9', '9 (0-19%) - Fail'), ('N/A', 'Not Available')], default='N/A', editable=False, help_text='Automatically determined GES grade', max_length=3, verbose_name='GES Grade')),
                ('letter_grade', models.CharField(blank=True, choices=[('A+', 'A+ (90-100%) - Outstanding'), ('A', 'A (80-89%) - Excellent'), ('B+', 'B+ (70-79%) - Very Good'), ('B', 'B (60-69%) - Good'), ('C+', 'C+ (50-59%) - Satisfactory'), ('C', 'C (40-49%) - Fair'), ('D+', 'D+ (30-39%) - Weak'), ('D', 'D (20-29%) - Very Weak'), ('F', 'F (0-19%) - Fail'), ('N/A', 'Not Available')], editable=False, help_text='Automatically determined letter grade', max_length=3, null=True, verbose_name='Letter Grade')),
                ('remarks', models.TextField(blank=True, help_text='Additional comments or notes about the grade', verbose_name='Teacher Remarks')),
                ('class_level', models.CharField(blank=True, choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], help_text="Student's class level (auto-set from student)", max_length=20, null=True, verbose_name='Class Level')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='Last Updated')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('is_locked', models.BooleanField(default=False, help_text='Prevent further modifications to this grade', verbose_name='Is Locked')),
                ('requires_review', models.BooleanField(default=False, help_text='Flag for administrative review', verbose_name='Requires Review')),
                ('review_notes', models.TextField(blank=True, help_text='Notes from administrative review', verbose_name='Review Notes')),
            ],
            options={
                'verbose_name': 'Grade',
                'verbose_name_plural': 'Grades',
                'ordering': ['academic_year', 'term', 'student__last_name', 'subject__name'],
            },
        ),
        migrations.CreateModel(
            name='GradeAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_level', models.CharField(choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], max_length=20)),
                ('average_score', models.FloatField()),
                ('highest_score', models.FloatField()),
                ('lowest_score', models.FloatField()),
                ('date_calculated', models.DateField(auto_now_add=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Grade Analytics',
                'verbose_name_plural': 'Grade Analytics',
            },
        ),
        migrations.CreateModel(
            name='Holiday',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('date', models.DateField()),
                ('is_school_holiday', models.BooleanField(default=True)),
                ('description', models.TextField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Holiday',
                'verbose_name_plural': 'Holidays',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='MaintenanceMode',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=False, verbose_name='Maintenance Active')),
                ('message', models.TextField(blank=True, help_text='Message to display to users during maintenance', verbose_name='Maintenance Message')),
                ('start_time', models.DateTimeField(blank=True, null=True, verbose_name='Start Time')),
                ('end_time', models.DateTimeField(blank=True, null=True, verbose_name='End Time')),
                ('allowed_ips', models.TextField(blank=True, help_text='Comma-separated list of IPs allowed during maintenance', verbose_name='Allowed IPs')),
                ('allow_staff_access', models.BooleanField(default=True, help_text='Allow all staff users to access the system during maintenance', verbose_name='Allow Staff Access')),
                ('allow_superuser_access', models.BooleanField(default=True, help_text='Allow all superusers to access the system during maintenance', verbose_name='Allow Superuser Access')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'Maintenance Mode',
                'verbose_name_plural': 'Maintenance Mode',
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('GRADE', 'Grade Update'), ('FEE', 'Fee Payment'), ('ASSIGNMENT', 'Assignment'), ('ATTENDANCE', 'Attendance'), ('GENERAL', 'General'), ('ANNOUNCEMENT', 'Announcement'), ('SYSTEM', 'System'), ('SECURITY', 'Security')], default='GENERAL', max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('related_object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('related_content_type', models.CharField(blank=True, max_length=50)),
                ('link', models.CharField(blank=True, max_length=500, null=True)),
                ('is_read', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Notification',
                'verbose_name_plural': 'Notifications',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OnlinePayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transaction_id', models.CharField(max_length=100, unique=True)),
                ('reference', models.CharField(blank=True, max_length=100)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='GHS', max_length=3)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('SUCCESS', 'Successful'), ('FAILED', 'Failed'), ('CANCELLED', 'Cancelled'), ('REFUNDED', 'Refunded')], default='PENDING', max_length=20)),
                ('payment_status', models.CharField(blank=True, max_length=100)),
                ('customer_email', models.EmailField(blank=True, max_length=254)),
                ('customer_name', models.CharField(blank=True, max_length=200)),
                ('customer_phone', models.CharField(blank=True, max_length=20)),
                ('gateway_response', models.JSONField(blank=True, default=dict)),
                ('initiated_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'ordering': ['-initiated_at'],
            },
        ),
        migrations.CreateModel(
            name='ParentAnnouncement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('target_type', models.CharField(choices=[('ALL', 'All Parents'), ('CLASS', 'Specific Class'), ('INDIVIDUAL', 'Individual Parents')], default='ALL', max_length=20)),
                ('target_class', models.CharField(blank=True, max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('is_important', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True, help_text='Whether this announcement is currently active')),
            ],
            options={
                'verbose_name': 'Parent Announcement',
                'verbose_name_plural': 'Parent Announcements',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ParentEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('start_date', models.DateTimeField()),
                ('end_date', models.DateTimeField()),
                ('location', models.CharField(blank=True, max_length=200)),
                ('is_whole_school', models.BooleanField(default=False)),
                ('class_level', models.CharField(blank=True, max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('event_type', models.CharField(choices=[('meeting', 'Parent-Teacher Meeting'), ('workshop', 'Workshop/Seminar'), ('celebration', 'Celebration/Performance'), ('sports', 'Sports Event'), ('academic', 'Academic Event'), ('other', 'Other')], default='meeting', max_length=50)),
                ('is_mandatory', models.BooleanField(default=False)),
                ('max_attendees', models.PositiveIntegerField(blank=True, help_text='Maximum number of attendees (if applicable)', null=True)),
                ('registration_deadline', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Parent Event',
                'verbose_name_plural': 'Parent Events',
                'ordering': ['start_date'],
            },
        ),
        migrations.CreateModel(
            name='ParentGuardian',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('occupation', models.CharField(blank=True, max_length=100)),
                ('relationship', models.CharField(choices=[('F', 'Father'), ('M', 'Mother'), ('B', 'Brother'), ('S', 'Sister'), ('G', 'Guardian'), ('O', 'Other Relative')], max_length=1)),
                ('phone_number', models.CharField(help_text='10-digit phone number starting with 0 (e.g., 0245478847)', max_length=10, validators=[django.core.validators.RegexValidator('^0\\d{9}$', message='Phone number must be 10 digits starting with 0 (e.g., 0245478847)')])),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('address', models.TextField(blank=True)),
                ('is_emergency_contact', models.BooleanField(default=False)),
                ('emergency_contact_priority', models.PositiveSmallIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('account_status', models.CharField(choices=[('pending', 'Pending Activation'), ('active', 'Active'), ('inactive', 'Inactive'), ('suspended', 'Suspended')], default='pending', max_length=20)),
                ('last_login_date', models.DateTimeField(blank=True, null=True)),
                ('login_count', models.PositiveIntegerField(default=0)),
                ('account_created', models.DateTimeField(auto_now_add=True)),
                ('account_updated', models.DateTimeField(auto_now=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Parent/Guardian',
                'verbose_name_plural': 'Parents/Guardians',
                'ordering': ['emergency_contact_priority', 'user__last_name'],
            },
        ),
        migrations.CreateModel(
            name='ParentMessage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subject', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('is_read', models.BooleanField(default=False)),
                ('is_bulk', models.BooleanField(default=False)),
                ('bulk_id', models.CharField(blank=True, help_text='ID to group messages from same bulk send', max_length=100, null=True)),
                ('priority', models.CharField(choices=[('normal', 'Normal'), ('high', 'High'), ('urgent', 'Urgent')], default='normal', max_length=20)),
                ('email_sent', models.BooleanField(default=False)),
                ('sms_sent', models.BooleanField(default=False)),
                ('email_sent_at', models.DateTimeField(blank=True, null=True)),
                ('sms_sent_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Parent Message',
                'verbose_name_plural': 'Parent Messages',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='PaymentGateway',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(choices=[('FLUTTERWAVE', 'Flutterwave'), ('PAYSTACK', 'Paystack'), ('STRIPE', 'Stripe')], max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('secret_key', models.CharField(blank=True, max_length=255)),
                ('public_key', models.CharField(blank=True, max_length=255)),
                ('encryption_key', models.CharField(blank=True, max_length=255)),
                ('webhook_hash', models.CharField(blank=True, max_length=255)),
                ('test_mode', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Payment Gateway',
                'verbose_name_plural': 'Payment Gateways',
            },
        ),
        migrations.CreateModel(
            name='PendingPayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reference', models.CharField(max_length=100, unique=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('gateway', models.CharField(max_length=20)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('completed', 'Completed'), ('failed', 'Failed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('metadata', models.JSONField(default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PromotionConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('primary_pass_mark', models.DecimalField(decimal_places=2, default=40.0, help_text='Minimum percentage to pass in primary school', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Primary Pass Mark (%)')),
                ('primary_must_pass_english', models.BooleanField(default=True, help_text='Students must pass English to be promoted', verbose_name='Must Pass English (Primary)')),
                ('primary_must_pass_maths', models.BooleanField(default=True, help_text='Students must pass Mathematics to be promoted', verbose_name='Must Pass Mathematics (Primary)')),
                ('primary_max_failed_subjects', models.IntegerField(default=2, help_text='Maximum number of failed subjects allowed for promotion in primary', validators=[django.core.validators.MinValueValidator(0)], verbose_name='Max Failed Subjects (Primary)')),
                ('jhs_pass_mark', models.DecimalField(decimal_places=2, default=45.0, help_text='Minimum percentage to pass in JHS', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='JHS Pass Mark (%)')),
                ('jhs_must_pass_core', models.BooleanField(default=True, help_text='Must pass all core subjects (English, Math, Science, Social)', verbose_name='Must Pass Core Subjects (JHS)')),
                ('jhs_max_failed_electives', models.IntegerField(default=1, help_text='Maximum failed elective subjects allowed in JHS', validators=[django.core.validators.MinValueValidator(0)], verbose_name='Max Failed Electives (JHS)')),
                ('automatic_promotion_to_p4', models.BooleanField(default=True, help_text='Automatic promotion from P1-P3 (common in Ghanaian schools)', verbose_name='Automatic Promotion to P4')),
                ('require_bnce_for_jhs3', models.BooleanField(default=True, help_text='Require Basic Education Certificate for JHS3 promotion', verbose_name='Require BNCE for JHS3')),
                ('offer_remedial_classes', models.BooleanField(default=True, help_text='Offer remedial classes for struggling students', verbose_name='Offer Remedial Classes')),
                ('remedial_pass_mark', models.DecimalField(decimal_places=2, default=50.0, help_text='Minimum percentage to pass remedial assessment', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Remedial Pass Mark (%)')),
                ('max_remedial_attempts', models.IntegerField(default=2, help_text='Maximum number of remedial attempts allowed', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(3)], verbose_name='Max Remedial Attempts')),
                ('allow_conditional_promotion', models.BooleanField(default=True, help_text='Allow conditional promotion with specific requirements', verbose_name='Allow Conditional Promotion')),
                ('conditional_promotion_min_attendance', models.DecimalField(decimal_places=2, default=75.0, help_text='Minimum attendance percentage for conditional promotion', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Min Attendance for Conditional Promotion (%)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'Promotion Configuration',
                'verbose_name_plural': 'Promotion Configuration',
            },
        ),
        migrations.CreateModel(
            name='ReportCard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9, validators=[django.core.validators.RegexValidator('^\\d{4}/\\d{4}$', 'Format: YYYY/YYYY')])),
                ('term', models.PositiveSmallIntegerField(choices=[(1, 'Term 1'), (2, 'Term 2'), (3, 'Term 3')], validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(3)])),
                ('average_score', models.DecimalField(decimal_places=2, default=0.0, help_text='Average score across all subjects', max_digits=5)),
                ('overall_grade', models.CharField(blank=True, choices=[('A+', 'A+ (90-100)'), ('A', 'A (80-89)'), ('B+', 'B+ (70-79)'), ('B', 'B (60-69)'), ('C+', 'C+ (50-59)'), ('C', 'C (40-49)'), ('D+', 'D+ (30-39)'), ('D', 'D (20-29)'), ('E', 'E (0-19)')], help_text='Overall grade based on average score', max_length=2)),
                ('subjects_count', models.PositiveIntegerField(default=0, help_text='Number of subjects graded')),
                ('is_published', models.BooleanField(default=False)),
                ('teacher_remarks', models.TextField(blank=True, help_text='Comments from class teacher')),
                ('principal_remarks', models.TextField(blank=True, help_text='Comments from principal')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Report Card',
                'verbose_name_plural': 'Report Cards',
                'ordering': ['-academic_year', '-term', 'student__last_name'],
            },
        ),
        migrations.CreateModel(
            name='ReportCardConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('include_comments', models.BooleanField(default=True, help_text='Include teacher comments on report cards', verbose_name='Include Teacher Comments')),
                ('include_attendance', models.BooleanField(default=True, help_text='Include attendance records on report cards', verbose_name='Include Attendance')),
                ('include_conduct', models.BooleanField(default=True, help_text='Include conduct/behavior assessment on report cards', verbose_name='Include Conduct')),
                ('include_extracurricular', models.BooleanField(default=False, help_text='Include extracurricular activities on report cards', verbose_name='Include Extracurricular')),
                ('principal_signature_required', models.BooleanField(default=True, help_text="Require principal's signature on report cards", verbose_name='Principal Signature Required')),
                ('class_teacher_signature_required', models.BooleanField(default=True, help_text="Require class teacher's signature on report cards", verbose_name='Class Teacher Signature Required')),
                ('include_next_term_begins_date', models.BooleanField(default=True, help_text='Include next term begins date on report cards', verbose_name='Include Next Term Date')),
                ('include_house_master_comment', models.BooleanField(default=False, help_text="Include house master's comment (for boarding schools)", verbose_name='Include House Master Comment')),
                ('include_counselor_comment', models.BooleanField(default=False, help_text="Include guidance counselor's comment", verbose_name='Include Counselor Comment')),
                ('show_grade_descriptions', models.BooleanField(default=True, help_text='Show grade descriptions on report cards', verbose_name='Show Grade Descriptions')),
                ('show_score_breakdown', models.BooleanField(default=True, help_text='Show breakdown of scores (classwork, homework, test, exam)', verbose_name='Show Score Breakdown')),
                ('show_class_position', models.BooleanField(default=True, help_text="Show student's position in class", verbose_name='Show Class Position')),
                ('show_overall_position', models.BooleanField(default=True, help_text="Show student's overall position in school", verbose_name='Show Overall Position')),
                ('show_grade_color_coding', models.BooleanField(default=True, help_text='Use color coding for grades on report cards', verbose_name='Use Color Coding')),
                ('school_logo', models.ImageField(blank=True, help_text='Logo to display on report cards', null=True, upload_to='school_logos/', verbose_name='School Logo')),
                ('header_color', models.CharField(default='#2E7D32', help_text='Color for report card header (hex code)', max_length=7, verbose_name='Header Color')),
                ('footer_text', models.TextField(blank=True, help_text='Text to display in report card footer', verbose_name='Footer Text')),
                ('paper_size', models.CharField(choices=[('A4', 'A4'), ('LETTER', 'Letter'), ('LEGAL', 'Legal')], default='A4', max_length=20, verbose_name='Paper Size')),
                ('orientation', models.CharField(choices=[('PORTRAIT', 'Portrait'), ('LANDSCAPE', 'Landscape')], default='PORTRAIT', max_length=10, verbose_name='Orientation')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'Report Card Configuration',
                'verbose_name_plural': 'Report Card Configuration',
            },
        ),
        migrations.CreateModel(
            name='ScheduledMaintenance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='Maintenance Title')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('maintenance_type', models.CharField(choices=[('EMERGENCY', 'Emergency Maintenance'), ('SCHEDULED', 'Scheduled Maintenance'), ('UPGRADE', 'System Upgrade'), ('BACKUP', 'System Backup')], default='SCHEDULED', max_length=20, verbose_name='Maintenance Type')),
                ('start_time', models.DateTimeField(verbose_name='Start Time')),
                ('end_time', models.DateTimeField(verbose_name='End Time')),
                ('message', models.TextField(help_text='Message to display to users during maintenance', verbose_name='User Message')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('was_executed', models.BooleanField(default=False, verbose_name='Was Executed')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
            ],
            options={
                'verbose_name': 'Scheduled Maintenance',
                'verbose_name_plural': 'Scheduled Maintenance',
                'ordering': ['-start_time'],
            },
        ),
        migrations.CreateModel(
            name='SchoolConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('grading_system', models.CharField(choices=[('GES', 'Ghana Education System (1-9)'), ('LETTER', 'Letter Grading System (A-F)'), ('BOTH', 'Both Systems'), ('CUSTOM', 'Custom Grading System')], default='GES', help_text='Select the grading system to use', max_length=10, verbose_name='Grading System')),
                ('school_level', models.CharField(choices=[('PRIMARY', 'Primary School (P1-P6)'), ('JHS', 'Junior High School (JHS1-JHS3)'), ('COMBINED', 'Combined Primary and JHS'), ('SHS', 'Senior High School'), ('OTHER', 'Other')], default='COMBINED', help_text='Select the school level', max_length=20, verbose_name='School Level')),
                ('grade_1_min', models.DecimalField(decimal_places=2, default=90.0, help_text='Minimum percentage for Grade 1 (Excellent)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 1 Minimum')),
                ('grade_2_min', models.DecimalField(decimal_places=2, default=80.0, help_text='Minimum percentage for Grade 2 (Very Good)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 2 Minimum')),
                ('grade_3_min', models.DecimalField(decimal_places=2, default=70.0, help_text='Minimum percentage for Grade 3 (Good)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 3 Minimum')),
                ('grade_4_min', models.DecimalField(decimal_places=2, default=60.0, help_text='Minimum percentage for Grade 4 (Credit)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 4 Minimum')),
                ('grade_5_min', models.DecimalField(decimal_places=2, default=50.0, help_text='Minimum percentage for Grade 5 (Credit)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 5 Minimum')),
                ('grade_6_min', models.DecimalField(decimal_places=2, default=40.0, help_text='Minimum percentage for Grade 6 (Pass)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 6 Minimum')),
                ('grade_7_min', models.DecimalField(decimal_places=2, default=30.0, help_text='Minimum percentage for Grade 7 (Pass)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 7 Minimum')),
                ('grade_8_min', models.DecimalField(decimal_places=2, default=20.0, help_text='Minimum percentage for Grade 8 (Weak)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 8 Minimum')),
                ('grade_9_max', models.DecimalField(decimal_places=2, default=19.99, help_text='Maximum percentage for Grade 9 (Very Weak/Fail)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Grade 9 Maximum')),
                ('letter_a_plus_min', models.DecimalField(decimal_places=2, default=90.0, help_text='Minimum percentage for A+', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='A+ Minimum')),
                ('letter_a_min', models.DecimalField(decimal_places=2, default=80.0, help_text='Minimum percentage for A', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='A Minimum')),
                ('letter_b_plus_min', models.DecimalField(decimal_places=2, default=70.0, help_text='Minimum percentage for B+', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='B+ Minimum')),
                ('letter_b_min', models.DecimalField(decimal_places=2, default=60.0, help_text='Minimum percentage for B', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='B Minimum')),
                ('letter_c_plus_min', models.DecimalField(decimal_places=2, default=50.0, help_text='Minimum percentage for C+', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='C+ Minimum')),
                ('letter_c_min', models.DecimalField(decimal_places=2, default=40.0, help_text='Minimum percentage for C', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='C Minimum')),
                ('letter_d_plus_min', models.DecimalField(decimal_places=2, default=30.0, help_text='Minimum percentage for D+', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='D+ Minimum')),
                ('letter_d_min', models.DecimalField(decimal_places=2, default=20.0, help_text='Minimum percentage for D', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='D Minimum')),
                ('letter_f_max', models.DecimalField(decimal_places=2, default=19.99, help_text='Maximum percentage for F (Fail)', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='F Maximum')),
                ('classwork_weight', models.DecimalField(decimal_places=2, default=30.0, help_text='Percentage weight for classwork assessments', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Classwork Weight (%)')),
                ('homework_weight', models.DecimalField(decimal_places=2, default=10.0, help_text='Percentage weight for homework assignments', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Homework Weight (%)')),
                ('test_weight', models.DecimalField(decimal_places=2, default=10.0, help_text='Percentage weight for tests', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Test Weight (%)')),
                ('exam_weight', models.DecimalField(decimal_places=2, default=50.0, help_text='Percentage weight for final examinations', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Exam Weight (%)')),
                ('passing_mark', models.DecimalField(decimal_places=2, default=40.0, help_text='Minimum percentage required to pass', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Passing Mark (%)')),
                ('is_locked', models.BooleanField(default=False, help_text='Lock the configuration to prevent changes', verbose_name='Configuration Locked')),
                ('academic_year', models.CharField(default='2026/2027', max_length=9, validators=[django.core.validators.RegexValidator('^\\d{4}/\\d{4}$', 'Academic year must be in format YYYY/YYYY')], verbose_name='Current Academic Year')),
                ('current_term', models.PositiveSmallIntegerField(choices=[(1, 'First Term'), (2, 'Second Term'), (3, 'Third Term')], default=1, verbose_name='Current Term')),
                ('has_three_terms', models.BooleanField(default=True, help_text='School operates on 3-term system', verbose_name='Three-Term System')),
                ('academic_period_system', models.CharField(choices=[('TERM', 'Term System (3 terms)'), ('SEMESTER', 'Semester System (2 semesters)'), ('QUARTER', 'Quarter System (4 quarters)'), ('TRIMESTER', 'Trimester System (3 trimesters)')], default='TERM', help_text='System used for academic periods (Terms, Semesters, etc.)', max_length=10, verbose_name='Academic Period System')),
                ('school_name', models.CharField(default='Ghana Education Service School', max_length=200, verbose_name='School Name')),
                ('school_address', models.TextField(default='', verbose_name='School Address')),
                ('school_phone', models.CharField(blank=True, help_text='10-digit phone number starting with 0 (e.g., 0245478847)', max_length=10, validators=[django.core.validators.RegexValidator('^0\\d{9}$', message='Phone number must be 10 digits starting with 0 (e.g., 0245478847)')], verbose_name='School Phone')),
                ('school_email', models.EmailField(blank=True, max_length=254, verbose_name='School Email')),
                ('principal_name', models.CharField(blank=True, max_length=100, verbose_name="Principal's Name")),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='Last Updated')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
            ],
            options={
                'verbose_name': 'School Configuration',
                'verbose_name_plural': 'School Configuration',
            },
        ),
        migrations.CreateModel(
            name='SecurityEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('event_type', models.CharField(choices=[('LOGIN_ATTEMPT', 'Login Attempt'), ('DATA_ACCESS', 'Data Access'), ('DATA_MODIFICATION', 'Data Modification'), ('CONFIG_CHANGE', 'Configuration Change'), ('SECURITY_ALERT', 'Security Alert'), ('SYSTEM_EVENT', 'System Event')], default='SYSTEM_EVENT', max_length=20)),
                ('severity', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], default='MEDIUM', max_length=20)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('details', models.JSONField(default=dict)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('is_resolved', models.BooleanField(default=False)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('resolved_notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Security Event',
                'verbose_name_plural': 'Security Events',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Student',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('student_id', models.CharField(max_length=20, unique=True)),
                ('first_name', models.CharField(max_length=100)),
                ('middle_name', models.CharField(blank=True, max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('date_of_birth', models.DateField()),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other'), ('N', 'Prefer not to say')], max_length=1)),
                ('nationality', models.CharField(default='Ghanaian', max_length=100)),
                ('ethnicity', models.CharField(blank=True, max_length=100)),
                ('religion', models.CharField(blank=True, max_length=100)),
                ('place_of_birth', models.CharField(max_length=100)),
                ('residential_address', models.TextField()),
                ('phone_number', models.CharField(blank=True, help_text='10-digit phone number starting with 0 (e.g., 0245478847)', max_length=10, validators=[django.core.validators.RegexValidator('^0\\d{9}$', message='Phone number must be 10 digits starting with 0 (e.g., 0245478847)')])),
                ('profile_picture', models.ImageField(blank=True, null=True, upload_to=core.models.base.student_image_path)),
                ('class_level', models.CharField(choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], max_length=20)),
                ('admission_date', models.DateField(default=django.utils.timezone.now)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Student',
                'verbose_name_plural': 'Students',
                'ordering': ['class_level', 'last_name', 'first_name'],
            },
        ),
        migrations.CreateModel(
            name='StudentAssignment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('SUBMITTED', 'Submitted'), ('LATE', 'Late'), ('GRADED', 'Graded')], default='PENDING', max_length=10)),
                ('submitted_date', models.DateTimeField(blank=True, null=True)),
                ('graded_date', models.DateTimeField(blank=True, null=True)),
                ('feedback_document', models.FileField(blank=True, null=True, upload_to='assignment_feedback/')),
                ('teacher_comments', models.TextField(blank=True)),
                ('rubric_score', models.JSONField(blank=True, help_text='JSON structure for rubric-based scoring', null=True)),
                ('is_draft', models.BooleanField(default=False, help_text='Flag for draft submissions')),
                ('last_viewed_by_student', models.DateTimeField(blank=True, null=True)),
                ('last_viewed_by_teacher', models.DateTimeField(blank=True, null=True)),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('feedback', models.TextField(blank=True)),
                ('file', models.FileField(blank=True, null=True, upload_to='assignments/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Student Assignment',
                'verbose_name_plural': 'Student Assignments',
                'ordering': ['assignment__due_date', 'student'],
            },
        ),
        migrations.CreateModel(
            name='StudentAttendance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_level', models.CharField(choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], max_length=20, verbose_name='Class Level')),
                ('academic_year', models.CharField(default='2024/2025', help_text='Format: YYYY/YYYY (e.g., 2024/2025)', max_length=9, verbose_name='Academic Year')),
                ('date', models.DateField()),
                ('status', models.CharField(choices=[('present', 'Present'), ('absent', 'Absent'), ('late', 'Late'), ('excused', 'Excused'), ('sick', 'Sick'), ('other', 'Other')], max_length=10)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about attendance')),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Student Attendance',
                'verbose_name_plural': 'Student Attendances',
                'ordering': ['-date', 'student__last_name'],
            },
        ),
        migrations.CreateModel(
            name='StudentCredit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('credit_amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('reason', models.CharField(default='Overpayment', max_length=200)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('is_used', models.BooleanField(default=False)),
                ('used_date', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Student Credit',
                'verbose_name_plural': 'Student Credits',
                'ordering': ['-created_date'],
            },
        ),
        migrations.CreateModel(
            name='Subject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Subject Name')),
                ('code', models.CharField(editable=False, max_length=10, unique=True, verbose_name='Subject Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'Subject',
                'verbose_name_plural': 'Subjects',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Teacher',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('employee_id', models.CharField(default='temporary', editable=False, max_length=20, unique=True)),
                ('date_of_birth', models.DateField()),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other'), ('N', 'Prefer not to say')], max_length=1)),
                ('phone_number', models.CharField(help_text='10-digit Ghana number (e.g., 0245846641)', max_length=10, validators=[django.core.validators.RegexValidator('^0[235][0-9]{8}$')])),
                ('address', models.TextField()),
                ('class_levels', models.CharField(help_text='Comma-separated list of class levels', max_length=50)),
                ('qualification', models.CharField(max_length=200)),
                ('date_of_joining', models.DateField(default=django.utils.timezone.now)),
                ('is_class_teacher', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('subjects', models.ManyToManyField(related_name='teachers', to='core.subject')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='teacher', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Teacher',
                'verbose_name_plural': 'Teachers',
                'ordering': ['user__last_name', 'user__first_name'],
            },
        ),
        migrations.CreateModel(
            name='TimeSlot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period_number', models.PositiveSmallIntegerField(choices=[(1, '1st Period (8:00-9:00)'), (2, '2nd Period (9:00-10:00)'), (3, '3rd Period (10:00-11:00)'), (4, '4th Period (11:00-12:00)'), (5, '5th Period (12:00-1:00)'), (6, '6th Period (1:00-2:00)'), (7, '7th Period (2:00-3:00)'), (8, '8th Period (3:00-4:00)')], unique=True)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('is_break', models.BooleanField(default=False)),
                ('break_name', models.CharField(blank=True, max_length=50, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Time Slot',
                'verbose_name_plural': 'Time Slots',
                'ordering': ['period_number'],
                'permissions': [('can_view_timeslot', 'Can view time slot'), ('manage_timeslot', 'Can manage time slot')],
            },
        ),
        migrations.CreateModel(
            name='Timetable',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('class_level', models.CharField(choices=[('NURSERY', 'Nursery'), ('KG', 'Kindergarten'), ('PRIMARY_1', 'Primary 1'), ('PRIMARY_2', 'Primary 2'), ('PRIMARY_3', 'Primary 3'), ('PRIMARY_4', 'Primary 4'), ('PRIMARY_5', 'Primary 5'), ('PRIMARY_6', 'Primary 6'), ('JHS_1', 'JHS 1'), ('JHS_2', 'JHS 2'), ('JHS_3', 'JHS 3'), ('SHS_1', 'SHS 1'), ('SHS_2', 'SHS 2'), ('SHS_3', 'SHS 3')], max_length=20)),
                ('day_of_week', models.PositiveSmallIntegerField(choices=[(0, 'Monday'), (1, 'Tuesday'), (2, 'Wednesday'), (3, 'Thursday'), (4, 'Friday'), (5, 'Saturday')])),
                ('academic_year', models.CharField(max_length=20)),
                ('term', models.PositiveSmallIntegerField(choices=[(1, 'First Term'), (2, 'Second Term'), (3, 'Third Term')])),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('academic_term', models.ForeignKey(blank=True, help_text='Link to academic period (optional)', null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.academicterm', verbose_name='Academic Period')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Timetable',
                'verbose_name_plural': 'Timetables',
                'ordering': ['class_level', 'day_of_week'],
                'permissions': [('can_view_timetable', 'Can view timetable'), ('manage_timetable', 'Can manage timetable')],
            },
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_blocked', models.BooleanField(default=False)),
                ('blocked_reason', models.TextField(blank=True, null=True)),
                ('blocked_at', models.DateTimeField(blank=True, null=True)),
                ('block_duration', models.DurationField(blank=True, help_text='Duration for temporary block', null=True)),
                ('block_until', models.DateTimeField(blank=True, help_text='Block until this date/time', null=True)),
                ('auto_unblock_at', models.DateTimeField(blank=True, null=True)),
                ('login_attempts', models.PositiveIntegerField(default=0)),
                ('last_login_attempt', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('has_financial_access', models.BooleanField(default=False, help_text='Whether this user can access and manage financial operations', verbose_name='Has Financial Access')),
                ('blocked_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'User Profile',
                'verbose_name_plural': 'User Profiles',
            },
        ),
        migrations.CreateModel(
            name='UserAnnouncementView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('dismissed', models.BooleanField(default=False)),
                ('viewed_at', models.DateTimeField(auto_now_add=True)),
                ('announcement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.announcement')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'User Announcement View',
                'verbose_name_plural': 'User Announcement Views',
                'ordering': ['-viewed_at'],
            },
        ),
        migrations.CreateModel(
            name='TimetableEntry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('classroom', models.CharField(blank=True, max_length=100)),
                ('is_break', models.BooleanField(default=False)),
                ('break_name', models.CharField(blank=True, max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('subject', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.subject')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.teacher')),
                ('time_slot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.timeslot')),
                ('timetable', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='entries', to='core.timetable')),
            ],
            options={
                'verbose_name': 'Timetable Entry',
                'verbose_name_plural': 'Timetable Entries',
                'ordering': ['time_slot__period_number'],
                'permissions': [('view_timetable_entry', 'Can view timetable entry'), ('manage_timetable_entry', 'Can manage timetable entry')],
            },
        ),
        migrations.AddIndex(
            model_name='subject',
            index=models.Index(fields=['name'], name='core_subjec_name_36111e_idx'),
        ),
        migrations.AddIndex(
            model_name='subject',
            index=models.Index(fields=['code'], name='core_subjec_code_91b858_idx'),
        ),
        migrations.AddIndex(
            model_name='subject',
            index=models.Index(fields=['is_active'], name='core_subjec_is_acti_80b240_idx'),
        ),
        migrations.AddField(
            model_name='studentcredit',
            name='source_fee',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.fee'),
        ),
        migrations.AddField(
            model_name='studentcredit',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='credits', to='core.student'),
        ),
        migrations.AddField(
            model_name='studentcredit',
            name='used_for_fee',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='applied_credits', to='core.fee'),
        ),
        migrations.AddField(
            model_name='studentattendance',
            name='period',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.attendanceperiod'),
        ),
        migrations.AddField(
            model_name='studentattendance',
            name='recorded_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Recorded By'),
        ),
        migrations.AddField(
            model_name='studentattendance',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendances', to='core.student'),
        ),
        migrations.AddField(
            model_name='studentattendance',
            name='term',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.academicterm'),
        ),
        migrations.AddField(
            model_name='studentassignment',
            name='assignment',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_assignments', to='core.assignment'),
        ),
        migrations.AddField(
            model_name='studentassignment',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.student'),
        ),
        migrations.AddField(
            model_name='student',
            name='user',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='student', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='securityevent',
            name='resolved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_events', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='securityevent',
            name='rule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='security_events', to='core.auditalertrule'),
        ),
        migrations.AddField(
            model_name='securityevent',
            name='user',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='scheduledmaintenance',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='Created By'),
        ),
        migrations.AddField(
            model_name='reportcardconfiguration',
            name='school_config',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='report_card_config', to='core.schoolconfiguration'),
        ),
        migrations.AddField(
            model_name='reportcard',
            name='academic_term',
            field=models.ForeignKey(blank=True, help_text='Link to academic period (optional)', null=True, on_delete=django.db.models.deletion.PROTECT, to='core.academicterm', verbose_name='Academic Period'),
        ),
        migrations.AddField(
            model_name='reportcard',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_report_cards', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='reportcard',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='report_cards', to='core.student'),
        ),
        migrations.AddField(
            model_name='promotionconfiguration',
            name='school_config',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='promotion_config', to='core.schoolconfiguration'),
        ),
        migrations.AddField(
            model_name='pendingpayment',
            name='bill',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.bill'),
        ),
        migrations.AddField(
            model_name='pendingpayment',
            name='fee',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.fee'),
        ),
        migrations.AddField(
            model_name='pendingpayment',
            name='initiated_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='parentmessage',
            name='parent',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.parentguardian'),
        ),
        migrations.AddField(
            model_name='parentmessage',
            name='receiver',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='received_parent_messages', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='parentmessage',
            name='sender',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sent_parent_messages', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='parentguardian',
            name='students',
            field=models.ManyToManyField(related_name='parents', to='core.student'),
        ),
        migrations.AddField(
            model_name='parentguardian',
            name='user',
            field=models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='parentguardian', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='parentevent',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='parentannouncement',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='parentannouncement',
            name='target_parents',
            field=models.ManyToManyField(blank=True, to='core.parentguardian'),
        ),
        migrations.AddField(
            model_name='onlinepayment',
            name='bill',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.bill'),
        ),
        migrations.AddField(
            model_name='onlinepayment',
            name='fee',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.fee'),
        ),
        migrations.AddField(
            model_name='onlinepayment',
            name='gateway',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='core.paymentgateway'),
        ),
        migrations.AddField(
            model_name='notification',
            name='recipient',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='maintenancemode',
            name='allowed_users',
            field=models.ManyToManyField(blank=True, help_text='Users who can access the system during maintenance', related_name='maintenance_bypass_users', to=settings.AUTH_USER_MODEL, verbose_name='Allowed Users'),
        ),
        migrations.AddField(
            model_name='maintenancemode',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='Created By'),
        ),
        migrations.AddField(
            model_name='gradeanalytics',
            name='subject',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.subject'),
        ),
        migrations.AddField(
            model_name='grade',
            name='academic_term',
            field=models.ForeignKey(blank=True, help_text='Link to academic period (optional)', null=True, on_delete=django.db.models.deletion.PROTECT, to='core.academicterm', verbose_name='Academic Period'),
        ),
        migrations.AddField(
            model_name='grade',
            name='class_assignment',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='grades', to='core.classassignment'),
        ),
        migrations.AddField(
            model_name='grade',
            name='recorded_by',
            field=models.ForeignKey(help_text='User who recorded this grade', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Recorded By'),
        ),
        migrations.AddField(
            model_name='grade',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='grades', to='core.student'),
        ),
        migrations.AddField(
            model_name='grade',
            name='subject',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='grades', to='core.subject'),
        ),
        migrations.AddField(
            model_name='financialaudittrail',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='audit_actions', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='feepayment',
            name='bill',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='fee_payments', to='core.bill'),
        ),
        migrations.AddField(
            model_name='feepayment',
            name='fee',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='core.fee'),
        ),
        migrations.AddField(
            model_name='feepayment',
            name='recorded_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='recorded_payments', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='feeinstallment',
            name='fee',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='installments', to='core.fee'),
        ),
        migrations.AddField(
            model_name='feegenerationbatch',
            name='academic_term',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.academicterm'),
        ),
        migrations.AddField(
            model_name='feegenerationbatch',
            name='generated_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='fee_batches', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='feegenerationbatch',
            name='locked_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='locked_batches', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='feegenerationbatch',
            name='verified_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_batches', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='feediscount',
            name='approved_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='feediscount',
            name='category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.feecategory'),
        ),
        migrations.AddField(
            model_name='feediscount',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discounts', to='core.student'),
        ),
        migrations.AddField(
            model_name='fee',
            name='academic_term',
            field=models.ForeignKey(blank=True, help_text='Link to academic period (optional)', null=True, on_delete=django.db.models.deletion.PROTECT, to='core.academicterm', verbose_name='Academic Period'),
        ),
        migrations.AddField(
            model_name='fee',
            name='bill',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fees', to='core.bill'),
        ),
        migrations.AddField(
            model_name='fee',
            name='category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='fees', to='core.feecategory'),
        ),
        migrations.AddField(
            model_name='fee',
            name='generation_batch',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fees', to='core.feegenerationbatch', verbose_name='Generation Batch'),
        ),
        migrations.AddField(
            model_name='fee',
            name='locked_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='locked_fees', to=settings.AUTH_USER_MODEL, verbose_name='Locked By'),
        ),
        migrations.AddField(
            model_name='fee',
            name='recorded_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='recorded_fees', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='fee',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='fees', to='core.student'),
        ),
        migrations.AddField(
            model_name='fee',
            name='verified_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_fees', to=settings.AUTH_USER_MODEL, verbose_name='Verified By'),
        ),
        migrations.AddField(
            model_name='expense',
            name='recorded_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='classassignment',
            name='subject',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='class_assignments', to='core.subject', verbose_name='Subject'),
        ),
        migrations.AddField(
            model_name='classassignment',
            name='teacher',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='class_assignments', to='core.teacher', verbose_name='Teacher'),
        ),
        migrations.AlterUniqueTogether(
            name='budget',
            unique_together={('academic_year', 'category')},
        ),
        migrations.AddField(
            model_name='billpayment',
            name='bill',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bill_payments', to='core.bill'),
        ),
        migrations.AddField(
            model_name='billpayment',
            name='confirmed_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='confirmed_bill_payments', to=settings.AUTH_USER_MODEL, verbose_name='Confirmed By'),
        ),
        migrations.AddField(
            model_name='billpayment',
            name='recorded_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='billitem',
            name='bill',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='core.bill'),
        ),
        migrations.AddField(
            model_name='billitem',
            name='fee_category',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='core.feecategory'),
        ),
        migrations.AddField(
            model_name='bill',
            name='recorded_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='recorded_bills', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='bill',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bills', to='core.student'),
        ),
        migrations.AddField(
            model_name='auditreport',
            name='generated_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='auditlog',
            name='user',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='auditalertrule',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_alert_rules', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='attendancesummary',
            name='period',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.attendanceperiod'),
        ),
        migrations.AddField(
            model_name='attendancesummary',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_summaries', to='core.student'),
        ),
        migrations.AddField(
            model_name='attendancesummary',
            name='term',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.academicterm'),
        ),
        migrations.AddField(
            model_name='attendanceperiod',
            name='term',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_periods', to='core.academicterm'),
        ),
        migrations.AlterUniqueTogether(
            name='attendanceanalytics',
            unique_together={('class_level', 'date')},
        ),
        migrations.AddField(
            model_name='assignmenttemplate',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='assignmenttemplate',
            name='subject',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.subject'),
        ),
        migrations.AddField(
            model_name='assignmentanalytics',
            name='assignment',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='analytics', to='core.assignment'),
        ),
        migrations.AddField(
            model_name='assignment',
            name='class_assignment',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.classassignment'),
        ),
        migrations.AddField(
            model_name='assignment',
            name='subject',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.subject'),
        ),
        migrations.AddField(
            model_name='announcement',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='academicterm',
            name='academic_year',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='terms', to='core.academicyear', verbose_name='Academic Year'),
        ),
        migrations.AlterUniqueTogether(
            name='userannouncementview',
            unique_together={('user', 'announcement')},
        ),
        migrations.AlterUniqueTogether(
            name='timetableentry',
            unique_together={('timetable', 'time_slot')},
        ),
        migrations.AlterUniqueTogether(
            name='timetable',
            unique_together={('class_level', 'day_of_week', 'academic_year', 'term')},
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['student', 'date'], name='core_studen_student_7334b1_idx'),
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['date', 'status'], name='core_studen_date_d1c5d9_idx'),
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['term', 'student'], name='core_studen_term_id_b15a9e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentattendance',
            unique_together={('student', 'date', 'period')},
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['status'], name='core_studen_status_cbcdd3_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['submitted_date'], name='core_studen_submitt_54a935_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['graded_date'], name='core_studen_graded__6ad214_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['score'], name='core_studen_score_674ec5_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['assignment', 'student'], name='core_studen_assignm_7a7fd6_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['student', 'status'], name='core_studen_student_a63d9c_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['assignment', 'status'], name='core_studen_assignm_cac8de_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['created_at'], name='core_studen_created_aadb24_idx'),
        ),
        migrations.AddIndex(
            model_name='studentassignment',
            index=models.Index(fields=['updated_at'], name='core_studen_updated_ab1315_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentassignment',
            unique_together={('student', 'assignment')},
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['student_id'], name='core_studen_student_fa4380_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['class_level', 'is_active'], name='core_studen_class_l_cb837a_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['last_name', 'first_name'], name='core_studen_last_na_d07597_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['is_active', 'class_level'], name='core_studen_is_acti_8f110e_idx'),
        ),
        migrations.AddIndex(
            model_name='reportcard',
            index=models.Index(fields=['student', 'academic_year', 'term'], name='core_report_student_28f0a2_idx'),
        ),
        migrations.AddIndex(
            model_name='reportcard',
            index=models.Index(fields=['is_published'], name='core_report_is_publ_4c4a66_idx'),
        ),
        migrations.AddIndex(
            model_name='reportcard',
            index=models.Index(fields=['average_score'], name='core_report_average_a1db18_idx'),
        ),
        migrations.AddIndex(
            model_name='reportcard',
            index=models.Index(fields=['academic_term'], name='core_report_academi_9f9e6e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='reportcard',
            unique_together={('student', 'academic_year', 'term')},
        ),
        migrations.AddIndex(
            model_name='pendingpayment',
            index=models.Index(fields=['reference'], name='core_pendin_referen_505730_idx'),
        ),
        migrations.AddIndex(
            model_name='pendingpayment',
            index=models.Index(fields=['status'], name='core_pendin_status_d7e50e_idx'),
        ),
        migrations.AddIndex(
            model_name='parentmessage',
            index=models.Index(fields=['receiver', 'is_read', '-timestamp'], name='core_parent_receive_ebc987_idx'),
        ),
        migrations.AddIndex(
            model_name='parentmessage',
            index=models.Index(fields=['sender', '-timestamp'], name='core_parent_sender__6c38f4_idx'),
        ),
        migrations.AddIndex(
            model_name='parentmessage',
            index=models.Index(fields=['parent', '-timestamp'], name='core_parent_parent__a31747_idx'),
        ),
        migrations.AddIndex(
            model_name='parentmessage',
            index=models.Index(fields=['is_bulk', 'bulk_id'], name='core_parent_is_bulk_2e6196_idx'),
        ),
        migrations.AddIndex(
            model_name='parentmessage',
            index=models.Index(fields=['priority', '-timestamp'], name='core_parent_priorit_aa27e8_idx'),
        ),
        migrations.AddIndex(
            model_name='parentmessage',
            index=models.Index(fields=['email_sent', 'sms_sent'], name='core_parent_email_s_c323c8_idx'),
        ),
        migrations.AddIndex(
            model_name='parentguardian',
            index=models.Index(fields=['account_status', 'last_login_date'], name='core_parent_account_3d4268_idx'),
        ),
        migrations.AddIndex(
            model_name='parentguardian',
            index=models.Index(fields=['email'], name='core_parent_email_e4172f_idx'),
        ),
        migrations.AddIndex(
            model_name='parentguardian',
            index=models.Index(fields=['phone_number'], name='core_parent_phone_n_6439e4_idx'),
        ),
        migrations.AddIndex(
            model_name='parentguardian',
            index=models.Index(fields=['relationship'], name='core_parent_relatio_1cc7b1_idx'),
        ),
        migrations.AddIndex(
            model_name='parentguardian',
            index=models.Index(fields=['created_at'], name='core_parent_created_8f85e6_idx'),
        ),
        migrations.AddConstraint(
            model_name='parentguardian',
            constraint=models.UniqueConstraint(condition=models.Q(('phone_number', ''), _negated=True), fields=('phone_number',), name='unique_phone_number'),
        ),
        migrations.AddIndex(
            model_name='parentevent',
            index=models.Index(fields=['start_date', 'end_date'], name='core_parent_start_d_15011d_idx'),
        ),
        migrations.AddIndex(
            model_name='parentevent',
            index=models.Index(fields=['is_whole_school', 'class_level'], name='core_parent_is_whol_ba160e_idx'),
        ),
        migrations.AddIndex(
            model_name='parentevent',
            index=models.Index(fields=['event_type', 'start_date'], name='core_parent_event_t_9b3be7_idx'),
        ),
        migrations.AddIndex(
            model_name='parentevent',
            index=models.Index(fields=['is_mandatory', 'start_date'], name='core_parent_is_mand_018476_idx'),
        ),
        migrations.AddIndex(
            model_name='parentannouncement',
            index=models.Index(fields=['target_type', 'is_active', '-created_at'], name='core_parent_target__523333_idx'),
        ),
        migrations.AddIndex(
            model_name='parentannouncement',
            index=models.Index(fields=['target_class', 'is_active'], name='core_parent_target__1e1319_idx'),
        ),
        migrations.AddIndex(
            model_name='parentannouncement',
            index=models.Index(fields=['created_at'], name='core_parent_created_d1fcb0_idx'),
        ),
        migrations.AddIndex(
            model_name='onlinepayment',
            index=models.Index(fields=['transaction_id'], name='core_online_transac_e5bfce_idx'),
        ),
        migrations.AddIndex(
            model_name='onlinepayment',
            index=models.Index(fields=['status'], name='core_online_status_d73ccb_idx'),
        ),
        migrations.AddIndex(
            model_name='onlinepayment',
            index=models.Index(fields=['gateway'], name='core_online_gateway_f3666e_idx'),
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['recipient', 'is_read', 'created_at'], name='core_notifi_recipie_4e71b2_idx'),
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['created_at'], name='core_notifi_created_d0c445_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='gradeanalytics',
            unique_together={('class_level', 'subject', 'date_calculated')},
        ),
        migrations.AddIndex(
            model_name='grade',
            index=models.Index(fields=['student', 'academic_year', 'term'], name='core_grade_student_ac1521_idx'),
        ),
        migrations.AddIndex(
            model_name='grade',
            index=models.Index(fields=['subject', 'academic_year', 'term'], name='core_grade_subject_85d4d1_idx'),
        ),
        migrations.AddIndex(
            model_name='grade',
            index=models.Index(fields=['total_score'], name='core_grade_total_s_c75197_idx'),
        ),
        migrations.AddIndex(
            model_name='grade',
            index=models.Index(fields=['academic_term'], name='core_grade_academi_3f6ba4_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='grade',
            unique_together={('student', 'subject', 'academic_year', 'term')},
        ),
        migrations.AddIndex(
            model_name='financialaudittrail',
            index=models.Index(fields=['model_name', 'object_id'], name='core_financ_model_n_6270ad_idx'),
        ),
        migrations.AddIndex(
            model_name='financialaudittrail',
            index=models.Index(fields=['user', 'timestamp'], name='core_financ_user_id_e455cc_idx'),
        ),
        migrations.AddIndex(
            model_name='financialaudittrail',
            index=models.Index(fields=['action', 'timestamp'], name='core_financ_action_f79791_idx'),
        ),
        migrations.AddIndex(
            model_name='fee',
            index=models.Index(fields=['student'], name='core_fee_student_e40f98_idx'),
        ),
        migrations.AddIndex(
            model_name='fee',
            index=models.Index(fields=['payment_status'], name='core_fee_payment_859d8e_idx'),
        ),
        migrations.AddIndex(
            model_name='fee',
            index=models.Index(fields=['due_date'], name='core_fee_due_dat_31c206_idx'),
        ),
        migrations.AddIndex(
            model_name='fee',
            index=models.Index(fields=['academic_term'], name='core_fee_academi_63a144_idx'),
        ),
        migrations.AddIndex(
            model_name='fee',
            index=models.Index(fields=['generation_status'], name='core_fee_generat_799dd7_idx'),
        ),
        migrations.AddIndex(
            model_name='fee',
            index=models.Index(fields=['generation_batch'], name='core_fee_generat_c90216_idx'),
        ),
        migrations.AddIndex(
            model_name='expense',
            index=models.Index(fields=['date', 'category'], name='core_expens_date_74c598_idx'),
        ),
        migrations.AddIndex(
            model_name='classassignment',
            index=models.Index(fields=['class_level', 'subject', 'academic_year'], name='core_classa_class_l_59935a_idx'),
        ),
        migrations.AddIndex(
            model_name='classassignment',
            index=models.Index(fields=['teacher', 'is_active'], name='core_classa_teacher_8aefd4_idx'),
        ),
        migrations.AddIndex(
            model_name='classassignment',
            index=models.Index(fields=['is_active', 'academic_year'], name='core_classa_is_acti_867ee9_idx'),
        ),
        migrations.AddIndex(
            model_name='classassignment',
            index=models.Index(fields=['class_level', 'is_active'], name='core_classa_class_l_1b666d_idx'),
        ),
        migrations.AddIndex(
            model_name='classassignment',
            index=models.Index(fields=['subject', 'academic_year'], name='core_classa_subject_49e0f8_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='classassignment',
            unique_together={('class_level', 'subject', 'academic_year')},
        ),
        migrations.AddIndex(
            model_name='billpayment',
            index=models.Index(fields=['bill', 'payment_date'], name='core_billpa_bill_id_b6439f_idx'),
        ),
        migrations.AddIndex(
            model_name='billpayment',
            index=models.Index(fields=['is_confirmed'], name='core_billpa_is_conf_c359d6_idx'),
        ),
        migrations.AddIndex(
            model_name='bill',
            index=models.Index(fields=['student', 'academic_year', 'term'], name='core_bill_student_b40258_idx'),
        ),
        migrations.AddIndex(
            model_name='bill',
            index=models.Index(fields=['status'], name='core_bill_status_5e1525_idx'),
        ),
        migrations.AddIndex(
            model_name='bill',
            index=models.Index(fields=['due_date'], name='core_bill_due_dat_69b74b_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['model_name', 'object_id'], name='core_auditl_model_n_3fb686_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['action', 'timestamp'], name='core_auditl_action_096de0_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['-timestamp'], name='core_auditl_timesta_189a84_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['user'], name='core_auditl_user_id_2ff9b7_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['action'], name='core_auditl_action_d9fb24_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='attendancesummary',
            unique_together={('student', 'term', 'period')},
        ),
        migrations.AlterUniqueTogether(
            name='attendanceperiod',
            unique_together={('period_type', 'term', 'start_date')},
        ),
        migrations.AlterUniqueTogether(
            name='academicterm',
            unique_together={('academic_year', 'period_system', 'period_number')},
        ),
    ]
